webpackJsonp([7],{"3unW":function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=i("Dd8w"),a=i.n(e),n=i("NYxO"),r={data:function(){return{min:"0",sec:"00",fullTime:"0: 00",commentCount:0}},computed:a()({},Object(n.c)(["playMode","comments","lovedSongs","isPlay","currentSongIndex","playingList","isPlay","isLogin"]),{id:function(){if(this.playingList[this.currentSongIndex])return this.playingList[this.currentSongIndex].id},song:function(){return this.playingList[this.currentSongIndex]?this.playingList[this.currentSongIndex].name:this.isLogin?"已登录":"还没有登录哦"},isLoved:function(){return this.lovedSongs.includes(this.id)},singer:function(){return this.playingList[this.currentSongIndex]?this.playingList[this.currentSongIndex].ar[0].name:this.isLogin?"正在努力加载我喜欢的歌曲":"当前无歌曲播放~"},player:function(){return document.getElementById("player")},progressBarLength:function(){var t=document.getElementById("progressBar");if(getComputedStyle(t))return getComputedStyle(t).width}}),methods:{goInfo:function(){this.$store.state.isLogin?this.$router.push("/my-profile"):this.$router.push("/login")},togglePlay:function(){this.playingList.length&&this.$store.commit("togglePlay")},nextSong:function(){0!==this.playMode?(this.player.pause(),this.player.currentTime=0,this.$store.commit("changeSongIndex"),this.$store.commit("setIsPlay",!1),this.$store.dispatch("getSongUrl",this.id)):this.player.currentTime=0},prevSong:function(){this.player.pause(),this.player.currentTime=0,this.$store.commit("songIndexReduceOne"),this.$store.commit("setIsPlay",!1),this.$store.dispatch("getSongUrl",this.id)},goback:function(){this.$router.go(-1)},setTime:function(t){var s=t.offsetX/parseInt(this.progressBarLength);this.player.currentTime=s*this.player.duration,this.$refs.currentProgress.style.width=t.offsetX+"px",this.$store.commit("setIsPlay",!0)},moveProgress:function(){this.$refs.currentProgress.style.width=this.player.currentTime/this.player.duration*parseInt(this.progressBarLength)+"px"},setPlayedTime:function(){this.min=Math.floor(this.player.currentTime/60);var t=Math.floor(this.player.currentTime%60);this.sec=t<10?"0"+t:t},setFulltTime:function(){var t=Math.floor(this.player.duration/60),s=Math.floor(this.player.duration%60);s<10&&(s="0"+s),this.fullTime={min:t||"0",sec:s||"00"}},changePlayMode:function(){this.$store.commit("changePlayMode")},getComments:function(){var t={type:"music",id:this.id,limit:1};this.$store.dispatch("getComments",t)},toggleLoved:function(){var t={isLoved:this.isLoved,id:this.id};this.$store.dispatch("toggleLoved",t)}},activated:function(){var t=this;console.log("activated"),this.$nextTick(function(){t.player.addEventListener("timeupdate",function(){t.moveProgress(),t.setPlayedTime(),t.setFulltTime()})})},watch:{id:function(t){var s=this;this.$nextTick(function(){s.getComments()})}}},o={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"player"},[e("div",{staticClass:"header"},[e("div",{staticClass:"goback",on:{click:function(s){t.goback()}}},[e("i",{staticClass:"fa fa-angle-left",attrs:{"aria-hidden":"true"}})]),t._v(" "),e("div",{staticClass:"info"},[e("span",{staticClass:"song"},[t._v(t._s(t.song))]),t._v(" "),e("span",{staticClass:"singer"},[t._v(t._s(t.singer))])]),t._v(" "),e("div",{staticClass:"profile",on:{click:function(s){t.goInfo()}}},[e("i",{staticClass:"fa fa-user-circle-o",attrs:{"aria-hidden":"true"}})])]),t._v(" "),e("div",{staticClass:"music-center"},[e("img",{staticClass:"hook",class:{up:!t.isPlay},attrs:{src:i("Y4rN")}}),t._v(" "),e("div",{staticClass:"black-circle",class:{spin:t.isPlay}},[t.playingList[t.currentSongIndex]?e("img",{attrs:{src:t.playingList[t.currentSongIndex].al.picUrl,alt:""}}):t._e()])]),t._v(" "),e("div",{staticClass:"control-center"},[e("div",{staticClass:"music-info"},[e("div",{staticClass:"btn",on:{click:function(s){t.toggleLoved()}}},[e("i",{staticClass:"fa",class:{"fa-heart-o":!t.isLoved,"fa-heart loved":t.isLoved},attrs:{"aria-hidden":"true"}})]),t._v(" "),t._m(0),t._v(" "),e("router-link",{staticClass:"btn comment",attrs:{to:"/comments/music/"+t.id}},[e("span",{staticClass:"count"},[t._v("\n\t\t\t\t\t\t"+t._s(t._f("commentCount")(t.comments.total))+"\n\t\t\t\t\t")]),t._v(" "),e("i",{staticClass:"fa fa-commenting-o",attrs:{"aria-hidden":"true"}})]),t._v(" "),t._m(1)],1),t._v(" "),e("div",{staticClass:"progress-bar"},[e("span",{staticClass:"playedTime"},[t._v(t._s(t.min)+" : "+t._s(t.sec))]),t._v(" "),e("div",{staticClass:"full-progress",attrs:{id:"progressBar"},on:{click:function(s){t.setTime(s)}}},[e("div",{ref:"currentProgress",staticClass:"current-progress"})]),t._v(" "),e("span",{staticClass:"restTime"},[t._v(t._s(t.fullTime.min)+" : "+t._s(t.fullTime.sec))])]),t._v(" "),e("div",{staticClass:"music-ctrl"},[e("div",{staticClass:"btn"},[e("i",{staticClass:"fa",class:{"fa-registered":0===t.playMode,"fa-refresh":1===t.playMode,"fa-random":2===t.playMode},attrs:{"aria-hidden":"true"},on:{click:function(s){t.changePlayMode()}}})]),t._v(" "),e("div",{staticClass:"btn"},[e("i",{staticClass:"fa fa-step-backward",attrs:{"aria-hidden":"true"},on:{click:function(s){t.prevSong()}}})]),t._v(" "),e("div",{staticClass:"btn"},[e("i",{staticClass:"fa play-btn",class:{"fa-play-circle-o":!t.isPlay,"fa-pause-circle-o":t.isPlay},attrs:{"aria-hidden":"true"},on:{click:function(s){t.togglePlay()}}})]),t._v(" "),e("div",{staticClass:"btn"},[e("i",{staticClass:"fa fa-step-forward",attrs:{"aria-hidden":"true"},on:{click:function(s){t.nextSong()}}})]),t._v(" "),t._m(2)])]),t._v(" "),e("div",{staticClass:"background"},[t.playingList[t.currentSongIndex]?e("img",{attrs:{src:t.playingList[t.currentSongIndex].al.picUrl,alt:""}}):t._e()])])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"btn"},[s("i",{staticClass:"fa fa-download",attrs:{"aria-hidden":"true"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"btn"},[s("i",{staticClass:"fa fa-ellipsis-v",attrs:{"aria-hidden":"true"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"btn"},[s("i",{staticClass:"fa fa-list",attrs:{"aria-hidden":"true"}})])}]},c=i("VU/8")(r,o,!1,function(t){i("zWu9")},"data-v-fecb9df6",null);s.default=c.exports},Y4rN:function(t,s,i){t.exports=i.p+"static/img/play-controler.98d5134.png"},zWu9:function(t,s){}});
//# sourceMappingURL=7.b9f2e43d470683a123a0.js.map