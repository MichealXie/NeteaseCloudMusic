webpackJsonp([8],{YOyO:function(s,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("mvHQ"),i=e.n(a),r={components:{loading:e("y/jF").a},data:function(){return{keywords:"",type:1,name:"songs",suggestion:["Ed sherran","男孩别哭","你被我写在歌里","Sad Season","好妹妹乐队","Isaac Gracie","袁维娅","Maroon 5","Lorde","窦靖童","Fun","谢春花"]}},computed:{searchResult:function(){return this.$store.state.searchResult},searchOption:function(){return{type:this.type,keywords:this.keywords,name:this.name}},isSearching:function(){return this.$store.state.isSearching},searchHistory:function(){if(localStorage.searchHistory)return JSON.parse(localStorage.searchHistory)}},methods:{goback:function(){history.back()},selectType:function(s,t){s&&(this.type=s),t&&(this.name=t),this.keywords&&this.$store.dispatch("getSongSearch",this.searchOption)},bingKeywords:function(s){this.keywords=s,this.selectType()},playSong:function(s,t,e){this.$store.commit("setIsPlay",!1),this.$store.dispatch("getSongUrl",s.id),this.$store.commit("setCurrentSongIndex",t),this.$store.commit("setSearchSongs",e),this.$store.commit("setIsPlay",!0)},deleteHistory:function(s){var t=this.searchHistory,e=t.indexOf(s);e>=0&&(t.splice(e,1),localStorage.searchHistory=i()(t))},refreshHistory:function(){this.searchHistory=JSON.parse(localStorage.searchHistory)}},activated:function(){this.keywords="",this.$refs["search-input"].focus()},watch:{keywords:function(s,t){if(s){this.selectType();var e=this.searchHistory;e?e.includes(s)||e.unshift(s):e=[s],localStorage.searchHistory=i()(e)}}}},n={render:function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"search"},[e("loading",{directives:[{name:"show",rawName:"v-show",value:s.isSearching,expression:"isSearching"}]},[s._v("(ง ˙o˙)ว")]),s._v(" "),e("div",{staticClass:"search-header"},[e("i",{staticClass:"fa fa-microphone",attrs:{"aria-hidden":"true"}}),s._v(" "),e("router-link",{staticClass:"router-link",attrs:{to:"/search"}},[e("input",{directives:[{name:"model",rawName:"v-model.lazy",value:s.keywords,expression:"keywords",modifiers:{lazy:!0}}],ref:"search-input",attrs:{type:"text",placeholder:"搜索音乐,歌词,电台"},domProps:{value:s.keywords},on:{change:function(t){s.keywords=t.target.value}}})]),s._v(" "),e("div",{staticClass:"goback",on:{click:function(t){s.goback()}}},[s._v("取消")])],1),s._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:s.keywords,expression:"keywords"}],staticClass:"search-tab"},[e("div",{staticClass:"song",class:{active:1===s.type},on:{click:function(t){s.selectType(1,"songs")}}},[s._v("单曲")]),s._v(" "),e("div",{staticClass:"album",class:{active:10===s.type},on:{click:function(t){s.selectType(10,"albums")}}},[s._v("专辑")]),s._v(" "),e("div",{staticClass:"singer",class:{active:100===s.type},on:{click:function(t){s.selectType(100,"artists")}}},[s._v("歌手")]),s._v(" "),e("div",{staticClass:"songlist",class:{active:1e3===s.type},on:{click:function(t){s.selectType(1e3,"playlists")}}},[s._v("歌单")]),s._v(" "),e("div",{staticClass:"user",class:{active:1002===s.type},on:{click:function(t){s.selectType(1002,"userprofiles")}}},[s._v("用户")])]),s._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!s.keywords,expression:"!keywords"}],staticClass:"default"},[e("span",{staticClass:"title"},[s._v(" 热门搜索 ")]),s._v(" "),e("ul",{staticClass:"suggestion"},s._l(s.suggestion,function(t){return e("li",{staticClass:"item",on:{click:function(e){s.bingKeywords(t)}}},[s._v("\n\t\t\t\t"+s._s(t)+"\n\t\t\t")])})),s._v(" "),s.searchHistory?e("ul",{staticClass:"history"},s._l(s.searchHistory,function(t){return e("li",{staticClass:"item"},[e("span",{staticClass:"word",on:{click:function(e){s.bingKeywords(t)}}},[s._v(s._s(t))]),s._v(" "),e("span",{staticClass:"close",on:{click:function(e){s.deleteHistory(t)}}},[e("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])])})):s._e()]),s._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:s.keywords,expression:"keywords"}],staticClass:"result"},[e("ul",{directives:[{name:"show",rawName:"v-show",value:1===s.type,expression:"type === 1"}],staticClass:"songs"},s._l(s.searchResult.songs,function(t,a){return e("li",{key:t.id,staticClass:"item",on:{click:function(e){s.playSong(t,a,s.searchResult.songs)}}},[e("div",{staticClass:"info"},[e("div",{staticClass:"name"},[s._v("\n\t\t\t\t\t\t"+s._s(t.name)+"\n\t\t\t\t\t")]),s._v(" "),e("div",{staticClass:"singer"},[s._v("\n\t\t\t\t\t\t"+s._s(t.artists[0].name)+" - "+s._s(t.album.name)+"\n\t\t\t\t\t")])])])})),s._v(" "),e("ul",{directives:[{name:"show",rawName:"v-show",value:10===s.type,expression:"type === 10"}],staticClass:"albums"},s._l(s.searchResult.albums,function(t){return e("router-link",{key:t.id,staticClass:"item",attrs:{to:"album/"+t.id}},[e("div",{staticClass:"cover"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.picUrl,expression:"item.picUrl"}],attrs:{alt:""}})]),s._v(" "),e("div",{staticClass:"info"},[e("div",{staticClass:"name"},[s._v("\n\t\t\t\t\t\t"+s._s(t.name)+"\n\t\t\t\t\t")]),s._v(" "),e("div",{staticClass:"singer"},[s._v("\n\t\t\t\t\t\t"+s._s(t.artist.name)+"\n\t\t\t\t\t")])])])})),s._v(" "),e("ul",{directives:[{name:"show",rawName:"v-show",value:100===s.type,expression:"type === 100"}],staticClass:"artists"},s._l(s.searchResult.artists,function(t){return e("li",{key:t.id},[e("div",{staticClass:"cover"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.img1v1Url,expression:"item.img1v1Url"}],attrs:{alt:""}})]),s._v(" "),e("div",{staticClass:"name"},[s._v("\n\t\t\t\t\t"+s._s(t.name)+"\n\t\t\t\t")])])})),s._v(" "),e("ul",{directives:[{name:"show",rawName:"v-show",value:1e3===s.type,expression:"type === 1000"}],staticClass:"playlists"},s._l(s.searchResult.playlists,function(t){return e("router-link",{key:t.id,staticClass:"item",attrs:{to:"/song-details/"+t.id}},[e("div",{staticClass:"cover"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.coverImgUrl,expression:"item.coverImgUrl"}],attrs:{alt:""}})]),s._v(" "),e("div",{staticClass:"info"},[e("span",{staticClass:"name"},[s._v(s._s(t.name))]),s._v(" "),e("span",{staticClass:"more"},[s._v(s._s(t.trackCount)+"首 by "+s._s(t.creator.nickname)+", 播放"+s._s(s._f("playcount")(t.playCount))+"次")])])])})),s._v(" "),e("ul",{directives:[{name:"show",rawName:"v-show",value:1002===s.type,expression:"type === 1002"}],staticClass:"userprofiles"},s._l(s.searchResult.userprofiles,function(t){return e("router-link",{key:t.id,staticClass:"item",attrs:{to:"/user-profile/"+t.userId}},[e("div",{staticClass:"cover"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.avatarUrl,expression:"item.avatarUrl"}],attrs:{alt:""}})]),s._v(" "),e("div",{staticClass:"info"},[e("div",{staticClass:"name"},[s._v("\n\t\t\t\t\t\t"+s._s(t.nickname)+" "),e("i",{staticClass:"fa",class:{"fa-venus":0===t.gender,"fa-mars":1===t.gender},attrs:{"aria-hidden":"true"}})]),s._v(" "),e("div",{staticClass:"signature"},[s._v(s._s(t.signature))])])])}))])],1)},staticRenderFns:[]},c=e("VU/8")(r,n,!1,function(s){e("fPiF")},"data-v-ce52437a",null);t.default=c.exports},fPiF:function(s,t){}});
//# sourceMappingURL=8.d37010e3a6774230fda7.js.map