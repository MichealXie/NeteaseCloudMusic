webpackJsonp([10],{REvM:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("Dd8w"),a=e.n(i),r=e("NYxO"),n={data:function(){return{min:"0",sec:"00",fullTime:"0: 00",commentCount:0}},computed:a()({},Object(r.c)(["playType","comments","lovedSongs","isPlay","FM","playType","playType"]),{id:function(){if(this.FM)return this.FM.id},song:function(){return this.FM?this.FM.name:"oops"},isLoved:function(){return this.lovedSongs.includes(this.id)},singer:function(){return this.FM?this.FM.artists[0].name:"当前无 FM 播放~"},player:function(){return document.getElementById("player")},progressBarLength:function(){var t=document.getElementById("progressBar");if(getComputedStyle(t))return getComputedStyle(t).width}}),methods:{togglePlay:function(){this.$store.commit("togglePlay")},nextFM:function(){this.player.pause(),this.player.currentTime=0,this.$store.dispatch("getFM")},goback:function(){this.$router.go(-1)},setTime:function(t){var s=t.offsetX/parseInt(this.progressBarLength);this.player.currentTime=s*this.player.duration,this.$refs.currentProgress.style.width=t.offsetX+"px",this.$store.commit("setIsPlay",!0)},moveProgress:function(){this.$refs.currentProgress.style.width=this.player.currentTime/this.player.duration*parseInt(this.progressBarLength)+"px"},setPlayedTime:function(){this.min=Math.floor(this.player.currentTime/60);var t=Math.floor(this.player.currentTime%60);this.sec=t<10?"0"+t:t},setFulltTime:function(){var t=Math.floor(this.player.duration/60),s=Math.floor(this.player.duration%60);s<10&&(s="0"+s),this.fullTime=t+":"+s},getComments:function(){var t={type:"music",id:this.id,limit:1};this.$store.dispatch("getComments",t)},toggleLoved:function(){var t={isLoved:this.isLoved,id:this.id};this.$store.dispatch("toggleLoved",t)}},activated:function(){var t=this;1===this.playType&&this.$store.dispatch("getFM"),this.$nextTick(function(){t.player.addEventListener("timeupdate",function(){t.moveProgress(),t.setPlayedTime(),t.setFulltTime()})})},watch:{id:function(t){var s=this;this.$nextTick(function(){s.getComments()})}}},o={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"player"},[e("div",{staticClass:"header"},[e("div",{staticClass:"goback",on:{click:function(s){t.goback()}}},[e("i",{staticClass:"fa fa-angle-left",attrs:{"aria-hidden":"true"}})]),t._v(" "),e("div",{staticClass:"info"},[t._v("\n\t\t\tWelcome to your own FM\n\t\t")])]),t._v(" "),e("div",{staticClass:"music-center"},[e("div",{staticClass:"img"},[t.FM?e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.FM.album.picUrl,expression:"FM.album.picUrl"}],attrs:{alt:""}}):t._e()]),t._v(" "),e("span",{staticClass:"song"},[t._v(t._s(t.song))]),t._v(" "),e("span",{staticClass:"singer"},[t._v(t._s(t.singer))])]),t._v(" "),e("div",{staticClass:"control-center"},[e("div",{staticClass:"progress-bar"},[e("span",{staticClass:"playedTime"},[t._v(t._s(t.min)+" : "+t._s(t.sec))]),t._v(" "),e("div",{staticClass:"full-progress",attrs:{id:"progressBar"},on:{click:function(s){t.setTime(s)}}},[e("div",{ref:"currentProgress",staticClass:"current-progress"})]),t._v(" "),e("span",{staticClass:"restTime"},[t._v(t._s(t.fullTime))])]),t._v(" "),e("div",{staticClass:"music-ctrl"},[t._m(0),t._v(" "),e("div",{staticClass:"btn",on:{click:function(s){t.toggleLoved()}}},[e("i",{staticClass:"fa",class:{"fa-heart-o":!t.isLoved,"fa-heart loved":t.isLoved},attrs:{"aria-hidden":"true"}})]),t._v(" "),e("div",{staticClass:"btn"},[e("i",{staticClass:"fa play-btn",class:{"fa-play-circle-o":!t.isPlay,"fa-pause-circle-o":t.isPlay},attrs:{"aria-hidden":"true"},on:{click:function(s){t.togglePlay()}}})]),t._v(" "),e("div",{staticClass:"btn"},[e("i",{staticClass:"fa fa-step-forward",attrs:{"aria-hidden":"true"},on:{click:function(s){t.nextFM()}}})]),t._v(" "),e("router-link",{staticClass:"btn comment",attrs:{to:"/comments/music/"+t.id}},[e("span",{staticClass:"count"},[t._v("\n\t\t\t\t\t"+t._s(t._f("commentCount")(t.comments.total))+"\n\t\t\t\t")]),t._v(" "),e("i",{staticClass:"fa fa-commenting-o",attrs:{"aria-hidden":"true"}})])],1)]),t._v(" "),e("div",{staticClass:"background"},[t.FM?e("img",{attrs:{src:t.FM.album.picUrl,alt:""}}):t._e()])])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"btn"},[s("i",{staticClass:"fa fa-trash",attrs:{"aria-hidden":"true"}})])}]},c=e("VU/8")(n,o,!1,function(t){e("hRIC")},"data-v-53f27372",null);s.default=c.exports},hRIC:function(t,s){}});
//# sourceMappingURL=10.aed16fc740ee10a19a9e.js.map